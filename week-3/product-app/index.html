<!DOCTYPE html>
<!--
  Students Name: Professor Krasso
  Date: 11/3/2023
  File Name: index.html
-->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Homes for Cheap: Home</title>

  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>Homes for Cheap</h1>
      <h2>Where you can find the best deals on homes</h2>
    </header>

    <aside>
      <a href="index.html">Home</a>
      <a href="about.html">About Us</a>
      <a href="#">Contact Us</a>
    </aside>

    <main style="min-height: 600px;">
      <h2>Homes for Sale Form</h2>

      <form>
        <div>
          <input type="checkbox" class="home" id="blue" name="blue" value="85000" />
          <label for="blue">One story blue home ($85,000)</label>
          <br />

          <input type="checkbox" class="home" id="green" name="green" value="125000" />
          <label for="green">Two story green home ($125,000)</label>
          <br />

          <input type="checkbox" class="home" id="red" name="red" value="150000" />
          <label for="red">Two story red home ($150,000)</label>
          <br />

          <input type="checkbox" class="home" id="yellow" name="yellow" value="100000" />
          <label for="yellow">One story yellow home ($100,000)</label>
          <br />

        </div>
      </form>

      <div>
        <p>Total Estimate: <span id="estimate"></span></p>
      </div>
    </main>

    <footer>
      <p>
        Copyright &copy; 2023
        <a href="mailto:richard.krasso@bellevue.edu">Professor Krasso</a>
      </p>
    </footer>

    <script type="module">
      import { Home, Loan } from "./js/index.js"; // Import the Home and Loan classes from the index.js file

      let homes = document.getElementsByClassName("home"); // Get all the home elements

      // Add an event listener to each home element and call the calcTotal function when the change event occurs
      for (let i = 0; i < homes.length; i++) {
        homes[i].addEventListener("change", calcTotal);
      }

      // Calculate the total of the selected homes and display it in the estimate span
      function calcTotal() {
        let loan = new Loan(); // Create a new instance of the Loan class

        for (let i = 0; i < homes.length; i++) {
          if (homes[i].checked) {
            loan.add(new Home(homes[i].name, homes[i].value)); // Create a new instance of the Home class and add it to the loan
          }
          // remove the home from the loan if it is unchecked
          else {
            loan.remove(homes[i].name); // Create a new instance of the Home class and remove it from the loan
          }
        }

        document.getElementById("estimate").innerHTML = formatCurrency(loan.total()); // Calculate the total and display it in the estimate span
      }

      // Format the currency value
      function formatCurrency(value) {
        return "$" + value.toLocaleString("en-US", {minimumFractionDigits: 2}); // Format the currency value to US dollars with two decimal places
      }
    </script>
  </div>
</body>
</html>

